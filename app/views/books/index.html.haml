%main.container
  %h1.general-title-margin
    .hidden-xs.clearfix
      .dropdowns.pull-right
        .dropdown.width-240
          %a.dropdown-toggle.lead.small{href: "#", 'data-toggle': "dropdown", role: "button", 'aria-haspopup': "true", 'aria-expanded': "false"}
            = t("book.sort.#{params[:filter] || :created_at_desc}")
            %i.fa.fa-angle-down.dropdown-icon.pull-right
          %ul.dropdown-menu
            - SortBooks::BOOK_FILTERS.each_key do |filter|
              %li
                = link_to t("book.sort.#{filter}"), books_path(filter: filter)
      %ul.list-inline.pt-10.mb-25.mr-240
        %li.mr-35
          = link_to books_path, class: 'filter-link' do
            = t('catalog.all')
            %span.badge.general-badge
              = @books_count
        - @categories.each do |category|
          %li.mr-35
            = link_to books_path(category_id: category.id), class: 'filter-link' do
              = category.name
              %span.badge.general-badge
                = category.books.count
      .mb-120
        = turbo_frame_tag "page_handler"
        #books
          = render 'books'
        = render "pager", pagy: @pagy
